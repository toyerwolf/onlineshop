<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="com.example.springsecurity.controller.ProductControllerTest" tests="9" skipped="0" failures="0" errors="0" timestamp="2024-07-30T06:30:23" hostname="E-AA-2Y5HDK3-L" time="38.109">
  <properties/>
  <testcase name="testGetDiscountedProduct()" classname="com.example.springsecurity.controller.ProductControllerTest" time="4.17"/>
  <testcase name="getProductRating()" classname="com.example.springsecurity.controller.ProductControllerTest" time="3.692"/>
  <testcase name="testUpdateProduct_AdminRole_Success()" classname="com.example.springsecurity.controller.ProductControllerTest" time="4.286"/>
  <testcase name="testChangeProductImages()" classname="com.example.springsecurity.controller.ProductControllerTest" time="4.073"/>
  <testcase name="testGetProductById()" classname="com.example.springsecurity.controller.ProductControllerTest" time="4.087"/>
  <testcase name="testDeleteProduct()" classname="com.example.springsecurity.controller.ProductControllerTest" time="4.214"/>
  <testcase name="testAddProductToCategory_AdminRole_Success()" classname="com.example.springsecurity.controller.ProductControllerTest" time="4.026"/>
  <testcase name="testGetAllProducts()" classname="com.example.springsecurity.controller.ProductControllerTest" time="4.596"/>
  <testcase name="testSearchProductByName()" classname="com.example.springsecurity.controller.ProductControllerTest" time="4.962"/>
  <system-out><![CDATA[2024-07-30T10:30:23.198+04:00  INFO 2876 --- [    Test worker] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.springsecurity.controller.ProductControllerTest]: ProductControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-07-30T10:30:23.201+04:00  INFO 2876 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.springsecurity.GatewayappApplication for test class com.example.springsecurity.controller.ProductControllerTest
2024-07-30T10:30:23.222+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:23.223+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:23.223+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:23.223+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:23.223+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:23.223+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:23.223+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:23.224+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:23.224+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:23.225+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:23.225+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:23.225+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:23.225+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:23.227+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-29 - Shutdown initiated...
2024-07-30T10:30:23.228+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-29 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2024-07-30T10:30:23.457+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Starting ProductControllerTest using Java 17.0.11 with PID 2876 (started by mameh1 in C:\Users\mameh1\Downloads\projects\spring-security\gatewayapp)
2024-07-30T10:30:23.458+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : The following 4 profiles are active: "db", "actuator", "google", "integration"
2024-07-30T10:30:24.343+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-30T10:30:24.471+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 128 ms. Found 12 JPA repository interfaces.
2024-07-30T10:30:24.555+04:00  INFO 2876 --- [    Test worker] o.s.cloud.context.scope.GenericScope     : BeanFactory id=fdf0a751-b714-323a-ae6a-061dba5ac89f
2024-07-30T10:30:24.628+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:24.631+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.633+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.637+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.639+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.640+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$1032/0x000002791c5e3010] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.644+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.649+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'spring.cloud.loadbalancer-org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.653+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.654+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.655+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientFactory' of type [org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.658+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'blockingLoadBalancerClient' of type [org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.664+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerServiceInstanceCookieTransformer' of type [org.springframework.cloud.loadbalancer.core.LoadBalancerServiceInstanceCookieTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.666+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'xForwarderHeadersTransformer' of type [org.springframework.cloud.loadbalancer.blocking.XForwardedHeadersTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.667+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.668+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerRequestFactory' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerRequestFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.669+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.671+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:24.673+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.674+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:24.752+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-07-30T10:30:24.752+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-07-30T10:30:24.752+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-07-30T10:30:24.827+04:00  INFO 2876 --- [    Test worker] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2024-07-30T10:30:24.827+04:00  INFO 2876 --- [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1367 ms
2024-07-30T10:30:24.950+04:00  INFO 2876 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-30T10:30:24.958+04:00  INFO 2876 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-07-30T10:30:24.968+04:00  INFO 2876 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-30T10:30:24.970+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-30 - Starting...
2024-07-30T10:30:24.971+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-30 - Added connection conn290: url=jdbc:h2:mem:demo user=POSTGRES
2024-07-30T10:30:24.971+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-30 - Start completed.
2024-07-30T10:30:24.971+04:00  WARN 2876 --- [    Test worker] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-07-30T10:30:25.137+04:00  INFO 2876 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-30T10:30:25.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:25.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:25.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:25.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:25.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:25.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:25.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:25.138+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:25.138+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:25.139+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:25.139+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:25.140+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:25.142+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
Hibernate: 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
2024-07-30T10:30:25.144+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
2024-07-30T10:30:25.145+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
Hibernate: 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
2024-07-30T10:30:25.146+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
2024-07-30T10:30:25.146+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
2024-07-30T10:30:25.147+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
Hibernate: 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
2024-07-30T10:30:25.148+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
Hibernate: 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
2024-07-30T10:30:25.149+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
Hibernate: 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
2024-07-30T10:30:25.149+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
Hibernate: 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
2024-07-30T10:30:25.150+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
Hibernate: 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
2024-07-30T10:30:25.151+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
Hibernate: 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
2024-07-30T10:30:25.151+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
Hibernate: 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
2024-07-30T10:30:25.151+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
Hibernate: 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
2024-07-30T10:30:25.152+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:25.153+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:25.153+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:25.154+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:25.154+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:25.155+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:25.155+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:25.155+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:25.156+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:25.156+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
Hibernate: 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
2024-07-30T10:30:25.157+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:25.157+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:25.158+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:25.158+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:25.159+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:25.161+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:25.554+04:00  WARN 2876 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-30T10:30:25.859+04:00  INFO 2876 --- [    Test worker] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-07-30T10:30:26.201+04:00  INFO 2876 --- [    Test worker] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 15 endpoint(s) beneath base path '/actuator'
2024-07-30T10:30:26.244+04:00  INFO 2876 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@79889714, org.springframework.security.web.session.ForceEagerSessionCreationFilter@7abbfd4d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@45082853, org.springframework.security.web.context.SecurityContextHolderFilter@25d551cf, org.springframework.security.web.header.HeaderWriterFilter@774d7431, org.springframework.web.filter.CorsFilter@a628904, org.springframework.security.web.authentication.logout.LogoutFilter@3a3e6cfd, com.example.springsecurity.security.JwtAuthenticationFilter@6eb6293a, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6a5d3dbd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@17e8a62f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4c9821be, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@376f9f6b, org.springframework.security.web.session.SessionManagementFilter@141d4945, org.springframework.security.web.access.ExceptionTranslationFilter@1f7377d9, org.springframework.security.web.access.intercept.AuthorizationFilter@69ef2b42]
2024-07-30T10:30:26.856+04:00  WARN 2876 --- [    Test worker] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-07-30T10:30:26.906+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 55530 (http) with context path ''
2024-07-30T10:30:27.309+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Started ProductControllerTest in 4.077 seconds (process running for 121.13)
2024-07-30T10:30:27.338+04:00  INFO 2876 --- [-auto-30-exec-2] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-30T10:30:27.338+04:00  INFO 2876 --- [-auto-30-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-07-30T10:30:27.341+04:00  INFO 2876 --- [-auto-30-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2024-07-30T10:30:27.343+04:00  INFO 2876 --- [-auto-30-exec-2] c.e.s.security.JwtAuthenticationFilter   : Checking jwt token...
2024-07-30T10:30:27.348+04:00 DEBUG 2876 --- [-auto-30-exec-2] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
2024-07-30T10:30:27.350+04:00 DEBUG 2876 --- [-auto-30-exec-2] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
2024-07-30T10:30:27.352+04:00 DEBUG 2876 --- [-auto-30-exec-2] org.hibernate.SQL                        : 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
Hibernate: 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
2024-07-30T10:30:27.360+04:00 DEBUG 2876 --- [-auto-30-exec-2] org.hibernate.SQL                        : 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    left join
        customer c1_0 
            on c1_0.id=cd1_0.customer_id 
    where
        c1_0.id=? 
        and cd1_0.discount_price is not null 
    fetch
        first ? rows only
Hibernate: 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    left join
        customer c1_0 
            on c1_0.id=cd1_0.customer_id 
    where
        c1_0.id=? 
        and cd1_0.discount_price is not null 
    fetch
        first ? rows only
2024-07-30T10:30:27.363+04:00 DEBUG 2876 --- [-auto-30-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.id=?
Hibernate: 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.id=?
2024-07-30T10:30:27.395+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:27.395+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:27.395+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:27.396+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:27.396+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:27.396+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:27.396+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:27.396+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:27.396+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:27.396+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:27.396+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:27.396+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:27.397+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:27.397+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-30 - Shutdown initiated...
2024-07-30T10:30:27.398+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-30 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2024-07-30T10:30:27.596+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Starting ProductControllerTest using Java 17.0.11 with PID 2876 (started by mameh1 in C:\Users\mameh1\Downloads\projects\spring-security\gatewayapp)
2024-07-30T10:30:27.596+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : The following 4 profiles are active: "db", "actuator", "google", "integration"
2024-07-30T10:30:28.221+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-30T10:30:28.336+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 114 ms. Found 12 JPA repository interfaces.
2024-07-30T10:30:28.386+04:00  INFO 2876 --- [    Test worker] o.s.cloud.context.scope.GenericScope     : BeanFactory id=fdf0a751-b714-323a-ae6a-061dba5ac89f
2024-07-30T10:30:28.420+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:28.421+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.422+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.424+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.424+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.425+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$1032/0x000002791c5e3010] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.427+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.431+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'spring.cloud.loadbalancer-org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.433+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.434+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.435+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientFactory' of type [org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.438+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'blockingLoadBalancerClient' of type [org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.444+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerServiceInstanceCookieTransformer' of type [org.springframework.cloud.loadbalancer.core.LoadBalancerServiceInstanceCookieTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.446+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'xForwarderHeadersTransformer' of type [org.springframework.cloud.loadbalancer.blocking.XForwardedHeadersTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.448+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.450+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerRequestFactory' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerRequestFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.451+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.453+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:28.454+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.455+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:28.524+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-07-30T10:30:28.525+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-07-30T10:30:28.525+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-07-30T10:30:28.584+04:00  INFO 2876 --- [    Test worker] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2024-07-30T10:30:28.584+04:00  INFO 2876 --- [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 986 ms
2024-07-30T10:30:28.714+04:00  INFO 2876 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-30T10:30:28.721+04:00  INFO 2876 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-07-30T10:30:28.735+04:00  INFO 2876 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-30T10:30:28.736+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-31 - Starting...
2024-07-30T10:30:28.737+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-31 - Added connection conn300: url=jdbc:h2:mem:demo user=POSTGRES
2024-07-30T10:30:28.737+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-31 - Start completed.
2024-07-30T10:30:28.738+04:00  WARN 2876 --- [    Test worker] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-07-30T10:30:28.861+04:00  INFO 2876 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:28.862+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
Hibernate: 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
2024-07-30T10:30:28.864+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
2024-07-30T10:30:28.866+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
Hibernate: 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
2024-07-30T10:30:28.867+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
2024-07-30T10:30:28.868+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
2024-07-30T10:30:28.869+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
Hibernate: 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
2024-07-30T10:30:28.869+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
Hibernate: 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
2024-07-30T10:30:28.870+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
Hibernate: 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
2024-07-30T10:30:28.871+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
Hibernate: 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
2024-07-30T10:30:28.871+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
Hibernate: 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
2024-07-30T10:30:28.872+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
Hibernate: 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
2024-07-30T10:30:28.873+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
Hibernate: 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
2024-07-30T10:30:28.875+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
Hibernate: 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
2024-07-30T10:30:28.876+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:28.876+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:28.876+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:28.877+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:28.877+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:28.878+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:28.879+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:28.879+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:28.880+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:28.880+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
Hibernate: 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
2024-07-30T10:30:28.881+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:28.882+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:28.882+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:28.882+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:28.883+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:28.885+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:29.202+04:00  WARN 2876 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-30T10:30:29.530+04:00  INFO 2876 --- [    Test worker] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-07-30T10:30:30.076+04:00  INFO 2876 --- [    Test worker] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 15 endpoint(s) beneath base path '/actuator'
2024-07-30T10:30:30.131+04:00  INFO 2876 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7666b2e9, org.springframework.security.web.session.ForceEagerSessionCreationFilter@592eba50, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@632ca2e3, org.springframework.security.web.context.SecurityContextHolderFilter@330802fb, org.springframework.security.web.header.HeaderWriterFilter@250183d4, org.springframework.web.filter.CorsFilter@1a720a41, org.springframework.security.web.authentication.logout.LogoutFilter@4f568a9, com.example.springsecurity.security.JwtAuthenticationFilter@10996805, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@75eb4194, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6325119a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2f4de64c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@59c0021c, org.springframework.security.web.session.SessionManagementFilter@4fadc0f2, org.springframework.security.web.access.ExceptionTranslationFilter@1b7f8a4d, org.springframework.security.web.access.intercept.AuthorizationFilter@59731f03]
2024-07-30T10:30:30.665+04:00  WARN 2876 --- [    Test worker] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-07-30T10:30:30.710+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 55541 (http) with context path ''
2024-07-30T10:30:31.028+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Started ProductControllerTest in 3.626 seconds (process running for 124.849)
2024-07-30T10:30:31.047+04:00  INFO 2876 --- [-auto-31-exec-1] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-30T10:30:31.047+04:00  INFO 2876 --- [-auto-31-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-07-30T10:30:31.049+04:00  INFO 2876 --- [-auto-31-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-07-30T10:30:31.051+04:00  INFO 2876 --- [-auto-31-exec-1] c.e.s.security.JwtAuthenticationFilter   : Checking jwt token...
2024-07-30T10:30:31.054+04:00 DEBUG 2876 --- [-auto-31-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.id=?
Hibernate: 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.id=?
2024-07-30T10:30:31.058+04:00 DEBUG 2876 --- [-auto-31-exec-1] org.hibernate.SQL                        : 
    select
        r1_0.product_id,
        r1_0.id,
        r1_0.created_at,
        r1_0.customer_id,
        r1_0.rating 
    from
        rating r1_0 
    where
        r1_0.product_id=?
Hibernate: 
    select
        r1_0.product_id,
        r1_0.id,
        r1_0.created_at,
        r1_0.customer_id,
        r1_0.rating 
    from
        rating r1_0 
    where
        r1_0.product_id=?
2024-07-30T10:30:31.059+04:00 DEBUG 2876 --- [-auto-31-exec-1] o.h.sql.results.internal.ResultsHelper   : Collection fully initialized: [com.example.springsecurity.entity.Product.ratings#1]
2024-07-30T10:30:31.082+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:31.082+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:31.082+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:31.082+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:31.082+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:31.082+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:31.082+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:31.083+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:31.083+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:31.083+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:31.083+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:31.083+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:31.083+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:31.083+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-31 - Shutdown initiated...
2024-07-30T10:30:31.085+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-31 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2024-07-30T10:30:31.278+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Starting ProductControllerTest using Java 17.0.11 with PID 2876 (started by mameh1 in C:\Users\mameh1\Downloads\projects\spring-security\gatewayapp)
2024-07-30T10:30:31.279+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : The following 4 profiles are active: "db", "actuator", "google", "integration"
2024-07-30T10:30:32.003+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-30T10:30:32.129+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 125 ms. Found 12 JPA repository interfaces.
2024-07-30T10:30:32.217+04:00  INFO 2876 --- [    Test worker] o.s.cloud.context.scope.GenericScope     : BeanFactory id=fdf0a751-b714-323a-ae6a-061dba5ac89f
2024-07-30T10:30:32.262+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:32.264+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.265+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.268+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.268+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.269+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$1032/0x000002791c5e3010] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.273+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.281+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'spring.cloud.loadbalancer-org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.284+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.285+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.285+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientFactory' of type [org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.287+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'blockingLoadBalancerClient' of type [org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.292+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerServiceInstanceCookieTransformer' of type [org.springframework.cloud.loadbalancer.core.LoadBalancerServiceInstanceCookieTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.293+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'xForwarderHeadersTransformer' of type [org.springframework.cloud.loadbalancer.blocking.XForwardedHeadersTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.295+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.296+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerRequestFactory' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerRequestFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.297+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.299+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:32.300+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.301+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:32.360+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-07-30T10:30:32.361+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-07-30T10:30:32.361+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-07-30T10:30:32.421+04:00  INFO 2876 --- [    Test worker] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2024-07-30T10:30:32.421+04:00  INFO 2876 --- [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1140 ms
2024-07-30T10:30:32.563+04:00  INFO 2876 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-30T10:30:32.572+04:00  INFO 2876 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-07-30T10:30:32.583+04:00  INFO 2876 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-30T10:30:32.585+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-32 - Starting...
2024-07-30T10:30:32.586+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-32 - Added connection conn310: url=jdbc:h2:mem:demo user=POSTGRES
2024-07-30T10:30:32.586+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-32 - Start completed.
2024-07-30T10:30:32.586+04:00  WARN 2876 --- [    Test worker] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-07-30T10:30:32.836+04:00  INFO 2876 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-30T10:30:32.836+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:32.836+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:32.837+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:32.837+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:32.837+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:32.837+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:32.837+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:32.837+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:32.837+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:32.837+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:32.837+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:32.837+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:32.837+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
Hibernate: 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
2024-07-30T10:30:32.838+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
2024-07-30T10:30:32.840+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
Hibernate: 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
2024-07-30T10:30:32.841+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
2024-07-30T10:30:32.842+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
2024-07-30T10:30:32.850+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
Hibernate: 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
2024-07-30T10:30:32.853+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
Hibernate: 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
2024-07-30T10:30:32.855+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
Hibernate: 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
2024-07-30T10:30:32.857+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
Hibernate: 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
2024-07-30T10:30:32.858+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
Hibernate: 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
2024-07-30T10:30:32.860+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
Hibernate: 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
2024-07-30T10:30:32.860+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
Hibernate: 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
2024-07-30T10:30:32.861+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
Hibernate: 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
2024-07-30T10:30:32.863+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:32.864+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:32.866+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:32.867+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:32.868+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:32.870+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:32.871+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:32.872+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:32.873+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:32.875+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
Hibernate: 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
2024-07-30T10:30:32.876+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:32.876+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:32.876+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:32.878+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:32.878+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:32.881+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:33.359+04:00  WARN 2876 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-30T10:30:33.671+04:00  INFO 2876 --- [    Test worker] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-07-30T10:30:34.065+04:00  INFO 2876 --- [    Test worker] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 15 endpoint(s) beneath base path '/actuator'
2024-07-30T10:30:34.117+04:00  INFO 2876 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4fdb76d3, org.springframework.security.web.session.ForceEagerSessionCreationFilter@55d485f0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@31e08c13, org.springframework.security.web.context.SecurityContextHolderFilter@623074f8, org.springframework.security.web.header.HeaderWriterFilter@73279fe4, org.springframework.web.filter.CorsFilter@51a185be, org.springframework.security.web.authentication.logout.LogoutFilter@6e302ef4, com.example.springsecurity.security.JwtAuthenticationFilter@14c51584, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@58a847a7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6cdea3d8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@605aa868, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@45d80cb7, org.springframework.security.web.session.SessionManagementFilter@1284b49c, org.springframework.security.web.access.ExceptionTranslationFilter@aa47770, org.springframework.security.web.access.intercept.AuthorizationFilter@49e23bdb]
2024-07-30T10:30:34.769+04:00  WARN 2876 --- [    Test worker] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-07-30T10:30:34.820+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 55546 (http) with context path ''
2024-07-30T10:30:35.279+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Started ProductControllerTest in 4.188 seconds (process running for 129.099)
2024-07-30T10:30:35.311+04:00  INFO 2876 --- [-auto-32-exec-1] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-30T10:30:35.311+04:00  INFO 2876 --- [-auto-32-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-07-30T10:30:35.313+04:00  INFO 2876 --- [-auto-32-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-07-30T10:30:35.315+04:00  INFO 2876 --- [-auto-32-exec-1] c.e.s.security.JwtAuthenticationFilter   : Checking jwt token...
2024-07-30T10:30:35.326+04:00 DEBUG 2876 --- [-auto-32-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
2024-07-30T10:30:35.329+04:00 DEBUG 2876 --- [-auto-32-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
2024-07-30T10:30:35.331+04:00 DEBUG 2876 --- [-auto-32-exec-1] org.hibernate.SQL                        : 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
Hibernate: 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
2024-07-30T10:30:35.342+04:00 DEBUG 2876 --- [-auto-32-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.id=?
Hibernate: 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.id=?
2024-07-30T10:30:35.346+04:00 DEBUG 2876 --- [-auto-32-exec-1] org.hibernate.SQL                        : 
    update
        product_test 
    set
        category_id=?,
        created_at=?,
        description=?,
        discount=?,
        discount_price=?,
        image_url=?,
        is_deleted=?,
        name=?,
        price=?,
        quantity=?,
        updated_at=? 
    where
        id=?
Hibernate: 
    update
        product_test 
    set
        category_id=?,
        created_at=?,
        description=?,
        discount=?,
        discount_price=?,
        image_url=?,
        is_deleted=?,
        name=?,
        price=?,
        quantity=?,
        updated_at=? 
    where
        id=?
2024-07-30T10:30:35.371+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:35.371+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:35.372+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:35.372+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:35.372+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:35.372+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:35.372+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:35.372+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:35.373+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:35.373+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:35.373+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:35.373+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:35.373+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:35.374+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-32 - Shutdown initiated...
2024-07-30T10:30:35.376+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-32 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2024-07-30T10:30:35.584+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Starting ProductControllerTest using Java 17.0.11 with PID 2876 (started by mameh1 in C:\Users\mameh1\Downloads\projects\spring-security\gatewayapp)
2024-07-30T10:30:35.584+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : The following 4 profiles are active: "db", "actuator", "google", "integration"
2024-07-30T10:30:36.236+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-30T10:30:36.319+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 82 ms. Found 12 JPA repository interfaces.
2024-07-30T10:30:36.366+04:00  INFO 2876 --- [    Test worker] o.s.cloud.context.scope.GenericScope     : BeanFactory id=fdf0a751-b714-323a-ae6a-061dba5ac89f
2024-07-30T10:30:36.396+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:36.398+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.399+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.401+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.402+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.402+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$1032/0x000002791c5e3010] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.404+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.407+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'spring.cloud.loadbalancer-org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.409+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.409+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.410+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientFactory' of type [org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.411+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'blockingLoadBalancerClient' of type [org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.414+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerServiceInstanceCookieTransformer' of type [org.springframework.cloud.loadbalancer.core.LoadBalancerServiceInstanceCookieTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.415+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'xForwarderHeadersTransformer' of type [org.springframework.cloud.loadbalancer.blocking.XForwardedHeadersTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.415+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.416+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerRequestFactory' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerRequestFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.417+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.418+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:36.420+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.420+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:36.483+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-07-30T10:30:36.484+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-07-30T10:30:36.484+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-07-30T10:30:36.552+04:00  INFO 2876 --- [    Test worker] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2024-07-30T10:30:36.552+04:00  INFO 2876 --- [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 966 ms
2024-07-30T10:30:36.672+04:00  INFO 2876 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-30T10:30:36.682+04:00  INFO 2876 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-07-30T10:30:36.697+04:00  INFO 2876 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-30T10:30:36.702+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-33 - Starting...
2024-07-30T10:30:36.705+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-33 - Added connection conn320: url=jdbc:h2:mem:demo user=POSTGRES
2024-07-30T10:30:36.706+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-33 - Start completed.
2024-07-30T10:30:36.706+04:00  WARN 2876 --- [    Test worker] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-07-30T10:30:36.929+04:00  INFO 2876 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-30T10:30:36.929+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:36.930+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:36.930+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:36.930+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:36.931+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:36.931+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:36.932+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:36.933+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:36.933+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:36.933+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:36.933+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:36.933+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:36.936+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
Hibernate: 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
2024-07-30T10:30:36.940+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
2024-07-30T10:30:36.943+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
Hibernate: 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
2024-07-30T10:30:36.944+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
2024-07-30T10:30:36.945+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
2024-07-30T10:30:36.948+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
Hibernate: 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
2024-07-30T10:30:36.949+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
Hibernate: 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
2024-07-30T10:30:36.949+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
Hibernate: 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
2024-07-30T10:30:36.950+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
Hibernate: 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
2024-07-30T10:30:36.951+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
Hibernate: 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
2024-07-30T10:30:36.952+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
Hibernate: 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
2024-07-30T10:30:36.952+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
Hibernate: 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
2024-07-30T10:30:36.952+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
Hibernate: 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
2024-07-30T10:30:36.953+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:36.954+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:36.955+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:36.956+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:36.956+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:36.956+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:36.957+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:36.957+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:36.958+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:36.959+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
Hibernate: 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
2024-07-30T10:30:36.959+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:36.960+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:36.960+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:36.960+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:36.960+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:36.963+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:37.510+04:00  WARN 2876 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-30T10:30:37.839+04:00  INFO 2876 --- [    Test worker] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-07-30T10:30:38.258+04:00  INFO 2876 --- [    Test worker] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 15 endpoint(s) beneath base path '/actuator'
2024-07-30T10:30:38.302+04:00  INFO 2876 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5884ddd8, org.springframework.security.web.session.ForceEagerSessionCreationFilter@12410996, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@247593ec, org.springframework.security.web.context.SecurityContextHolderFilter@39b9c56b, org.springframework.security.web.header.HeaderWriterFilter@7dac111e, org.springframework.web.filter.CorsFilter@48a83340, org.springframework.security.web.authentication.logout.LogoutFilter@68504f5e, com.example.springsecurity.security.JwtAuthenticationFilter@65aa6b8e, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@490980ed, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7e9a21a9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6547b1ec, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@36bc5d90, org.springframework.security.web.session.SessionManagementFilter@71e1a096, org.springframework.security.web.access.ExceptionTranslationFilter@7ce79835, org.springframework.security.web.access.intercept.AuthorizationFilter@6717d5e9]
2024-07-30T10:30:38.823+04:00  WARN 2876 --- [    Test worker] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-07-30T10:30:38.887+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 55553 (http) with context path ''
2024-07-30T10:30:39.314+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Started ProductControllerTest in 3.933 seconds (process running for 133.135)
2024-07-30T10:30:39.360+04:00  INFO 2876 --- [-auto-33-exec-2] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-30T10:30:39.360+04:00  INFO 2876 --- [-auto-33-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-07-30T10:30:39.362+04:00  INFO 2876 --- [-auto-33-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-07-30T10:30:39.364+04:00  INFO 2876 --- [-auto-33-exec-2] c.e.s.security.JwtAuthenticationFilter   : Checking jwt token...
2024-07-30T10:30:39.370+04:00 DEBUG 2876 --- [-auto-33-exec-2] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
2024-07-30T10:30:39.371+04:00 DEBUG 2876 --- [-auto-33-exec-2] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
2024-07-30T10:30:39.373+04:00 DEBUG 2876 --- [-auto-33-exec-2] org.hibernate.SQL                        : 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
Hibernate: 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
2024-07-30T10:30:39.409+04:00 DEBUG 2876 --- [-auto-33-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.id=?
Hibernate: 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.id=?
2024-07-30T10:30:39.447+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:39.447+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:39.447+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:39.447+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:39.447+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:39.448+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:39.448+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:39.448+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:39.448+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:39.448+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:39.448+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:39.448+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:39.449+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:39.449+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-33 - Shutdown initiated...
2024-07-30T10:30:39.451+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-33 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2024-07-30T10:30:39.678+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Starting ProductControllerTest using Java 17.0.11 with PID 2876 (started by mameh1 in C:\Users\mameh1\Downloads\projects\spring-security\gatewayapp)
2024-07-30T10:30:39.678+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : The following 4 profiles are active: "db", "actuator", "google", "integration"
2024-07-30T10:30:40.413+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-30T10:30:40.521+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 108 ms. Found 12 JPA repository interfaces.
2024-07-30T10:30:40.575+04:00  INFO 2876 --- [    Test worker] o.s.cloud.context.scope.GenericScope     : BeanFactory id=fdf0a751-b714-323a-ae6a-061dba5ac89f
2024-07-30T10:30:40.609+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:40.610+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.612+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.614+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.615+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.616+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$1032/0x000002791c5e3010] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.618+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.621+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'spring.cloud.loadbalancer-org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.624+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.625+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.625+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientFactory' of type [org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.627+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'blockingLoadBalancerClient' of type [org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.631+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerServiceInstanceCookieTransformer' of type [org.springframework.cloud.loadbalancer.core.LoadBalancerServiceInstanceCookieTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.632+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'xForwarderHeadersTransformer' of type [org.springframework.cloud.loadbalancer.blocking.XForwardedHeadersTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.633+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.634+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerRequestFactory' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerRequestFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.635+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.637+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:40.638+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.639+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:40.698+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-07-30T10:30:40.698+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-07-30T10:30:40.698+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-07-30T10:30:40.753+04:00  INFO 2876 --- [    Test worker] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2024-07-30T10:30:40.753+04:00  INFO 2876 --- [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1074 ms
2024-07-30T10:30:40.894+04:00  INFO 2876 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-30T10:30:40.901+04:00  INFO 2876 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-07-30T10:30:40.916+04:00  INFO 2876 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-30T10:30:40.919+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-34 - Starting...
2024-07-30T10:30:40.921+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-34 - Added connection conn330: url=jdbc:h2:mem:demo user=POSTGRES
2024-07-30T10:30:40.922+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-34 - Start completed.
2024-07-30T10:30:40.922+04:00  WARN 2876 --- [    Test worker] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-07-30T10:30:41.106+04:00  INFO 2876 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-30T10:30:41.107+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:41.107+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:41.107+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:41.107+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:41.107+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:41.108+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:41.108+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:41.108+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:41.108+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:41.108+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:41.108+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:41.108+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:41.111+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
Hibernate: 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
2024-07-30T10:30:41.116+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
2024-07-30T10:30:41.118+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
Hibernate: 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
2024-07-30T10:30:41.123+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
2024-07-30T10:30:41.128+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
2024-07-30T10:30:41.128+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
Hibernate: 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
2024-07-30T10:30:41.129+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
Hibernate: 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
2024-07-30T10:30:41.130+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
Hibernate: 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
2024-07-30T10:30:41.131+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
Hibernate: 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
2024-07-30T10:30:41.132+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
Hibernate: 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
2024-07-30T10:30:41.133+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
Hibernate: 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
2024-07-30T10:30:41.136+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
Hibernate: 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
2024-07-30T10:30:41.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
Hibernate: 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
2024-07-30T10:30:41.142+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:41.143+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:41.143+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:41.144+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:41.145+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:41.145+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:41.147+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:41.149+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:41.149+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:41.150+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
Hibernate: 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
2024-07-30T10:30:41.151+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:41.153+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:41.153+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:41.154+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:41.154+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:41.159+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:41.662+04:00  WARN 2876 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-30T10:30:41.957+04:00  INFO 2876 --- [    Test worker] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-07-30T10:30:42.329+04:00  INFO 2876 --- [    Test worker] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 15 endpoint(s) beneath base path '/actuator'
2024-07-30T10:30:42.398+04:00  INFO 2876 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@62c74612, org.springframework.security.web.session.ForceEagerSessionCreationFilter@31cf7bf4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@262c08d3, org.springframework.security.web.context.SecurityContextHolderFilter@94e5c02, org.springframework.security.web.header.HeaderWriterFilter@6753c68a, org.springframework.web.filter.CorsFilter@609fa772, org.springframework.security.web.authentication.logout.LogoutFilter@f1701c0, com.example.springsecurity.security.JwtAuthenticationFilter@55283d20, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1d09da44, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@44fdf468, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@141fc9f0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@38b09aa5, org.springframework.security.web.session.SessionManagementFilter@4ff554ce, org.springframework.security.web.access.ExceptionTranslationFilter@38339ccd, org.springframework.security.web.access.intercept.AuthorizationFilter@23bd58b2]
2024-07-30T10:30:43.019+04:00  WARN 2876 --- [    Test worker] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-07-30T10:30:43.061+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 55560 (http) with context path ''
2024-07-30T10:30:43.474+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Started ProductControllerTest in 4.019 seconds (process running for 137.295)
2024-07-30T10:30:43.494+04:00  INFO 2876 --- [-auto-34-exec-1] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-30T10:30:43.494+04:00  INFO 2876 --- [-auto-34-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-07-30T10:30:43.496+04:00  INFO 2876 --- [-auto-34-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-07-30T10:30:43.498+04:00  INFO 2876 --- [-auto-34-exec-1] c.e.s.security.JwtAuthenticationFilter   : Checking jwt token...
2024-07-30T10:30:43.501+04:00 DEBUG 2876 --- [-auto-34-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.id=?
Hibernate: 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.id=?
2024-07-30T10:30:43.503+04:00 DEBUG 2876 --- [-auto-34-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.category_id,
        c1_0.description,
        c1_0.is_deleted,
        c1_0.name 
    from
        category_test c1_0 
    where
        c1_0.category_id=?
Hibernate: 
    select
        c1_0.category_id,
        c1_0.description,
        c1_0.is_deleted,
        c1_0.name 
    from
        category_test c1_0 
    where
        c1_0.category_id=?
2024-07-30T10:30:43.534+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:43.534+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:43.535+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:43.535+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:43.535+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:43.536+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:43.536+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:43.536+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:43.536+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:43.537+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:43.537+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:43.537+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:43.537+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:43.538+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-34 - Shutdown initiated...
2024-07-30T10:30:43.540+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-34 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2024-07-30T10:30:43.756+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Starting ProductControllerTest using Java 17.0.11 with PID 2876 (started by mameh1 in C:\Users\mameh1\Downloads\projects\spring-security\gatewayapp)
2024-07-30T10:30:43.756+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : The following 4 profiles are active: "db", "actuator", "google", "integration"
2024-07-30T10:30:44.438+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-30T10:30:44.520+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 81 ms. Found 12 JPA repository interfaces.
2024-07-30T10:30:44.583+04:00  INFO 2876 --- [    Test worker] o.s.cloud.context.scope.GenericScope     : BeanFactory id=fdf0a751-b714-323a-ae6a-061dba5ac89f
2024-07-30T10:30:44.623+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:44.625+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.626+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.628+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.630+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.631+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$1032/0x000002791c5e3010] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.635+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.637+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'spring.cloud.loadbalancer-org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.640+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.641+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.641+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientFactory' of type [org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.642+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'blockingLoadBalancerClient' of type [org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.646+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerServiceInstanceCookieTransformer' of type [org.springframework.cloud.loadbalancer.core.LoadBalancerServiceInstanceCookieTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.647+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'xForwarderHeadersTransformer' of type [org.springframework.cloud.loadbalancer.blocking.XForwardedHeadersTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.648+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.650+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerRequestFactory' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerRequestFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.651+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.654+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:44.655+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.656+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:44.730+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-07-30T10:30:44.731+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-07-30T10:30:44.731+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-07-30T10:30:44.799+04:00  INFO 2876 --- [    Test worker] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2024-07-30T10:30:44.799+04:00  INFO 2876 --- [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1041 ms
2024-07-30T10:30:44.956+04:00  INFO 2876 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-30T10:30:44.965+04:00  INFO 2876 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-07-30T10:30:44.977+04:00  INFO 2876 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-30T10:30:44.979+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-35 - Starting...
2024-07-30T10:30:44.980+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-35 - Added connection conn340: url=jdbc:h2:mem:demo user=POSTGRES
2024-07-30T10:30:44.980+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-35 - Start completed.
2024-07-30T10:30:44.980+04:00  WARN 2876 --- [    Test worker] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-07-30T10:30:45.136+04:00  INFO 2876 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-30T10:30:45.136+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:45.136+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:45.136+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:45.136+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:45.136+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:45.136+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:45.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:45.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:45.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:45.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:45.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:45.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:45.137+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
Hibernate: 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
2024-07-30T10:30:45.138+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
2024-07-30T10:30:45.140+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
Hibernate: 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
2024-07-30T10:30:45.143+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
2024-07-30T10:30:45.145+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
2024-07-30T10:30:45.147+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
Hibernate: 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
2024-07-30T10:30:45.149+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
Hibernate: 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
2024-07-30T10:30:45.152+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
Hibernate: 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
2024-07-30T10:30:45.153+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
Hibernate: 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
2024-07-30T10:30:45.155+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
Hibernate: 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
2024-07-30T10:30:45.156+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
Hibernate: 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
2024-07-30T10:30:45.157+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
Hibernate: 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
2024-07-30T10:30:45.158+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
Hibernate: 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
2024-07-30T10:30:45.158+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:45.159+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:45.160+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:45.160+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:45.161+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:45.161+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:45.162+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:45.162+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:45.162+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:45.163+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
Hibernate: 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
2024-07-30T10:30:45.163+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:45.166+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:45.167+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:45.169+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:45.170+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:45.172+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:45.732+04:00  WARN 2876 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-30T10:30:46.085+04:00  INFO 2876 --- [    Test worker] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-07-30T10:30:46.535+04:00  INFO 2876 --- [    Test worker] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 15 endpoint(s) beneath base path '/actuator'
2024-07-30T10:30:46.579+04:00  INFO 2876 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1055317a, org.springframework.security.web.session.ForceEagerSessionCreationFilter@6f5af802, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@22e72332, org.springframework.security.web.context.SecurityContextHolderFilter@7840c23c, org.springframework.security.web.header.HeaderWriterFilter@6b423a36, org.springframework.web.filter.CorsFilter@5ae557e5, org.springframework.security.web.authentication.logout.LogoutFilter@3a7a14eb, com.example.springsecurity.security.JwtAuthenticationFilter@59c1e9a2, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@28eae359, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5b146e31, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@15216198, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@63026322, org.springframework.security.web.session.SessionManagementFilter@48ae693f, org.springframework.security.web.access.ExceptionTranslationFilter@1c097084, org.springframework.security.web.access.intercept.AuthorizationFilter@62073637]
2024-07-30T10:30:47.235+04:00  WARN 2876 --- [    Test worker] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-07-30T10:30:47.283+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 55575 (http) with context path ''
2024-07-30T10:30:47.679+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Started ProductControllerTest in 4.135 seconds (process running for 141.5)
2024-07-30T10:30:47.698+04:00  INFO 2876 --- [-auto-35-exec-1] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-30T10:30:47.698+04:00  INFO 2876 --- [-auto-35-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-07-30T10:30:47.700+04:00  INFO 2876 --- [-auto-35-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-07-30T10:30:47.701+04:00  INFO 2876 --- [-auto-35-exec-1] c.e.s.security.JwtAuthenticationFilter   : Checking jwt token...
2024-07-30T10:30:47.706+04:00 DEBUG 2876 --- [-auto-35-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
2024-07-30T10:30:47.707+04:00 DEBUG 2876 --- [-auto-35-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
2024-07-30T10:30:47.709+04:00 DEBUG 2876 --- [-auto-35-exec-1] org.hibernate.SQL                        : 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
Hibernate: 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
2024-07-30T10:30:47.715+04:00 DEBUG 2876 --- [-auto-35-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.id=?
Hibernate: 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.id=?
2024-07-30T10:30:47.719+04:00 DEBUG 2876 --- [-auto-35-exec-1] org.hibernate.SQL                        : 
    update
        product_test 
    set
        category_id=?,
        created_at=?,
        description=?,
        discount=?,
        discount_price=?,
        image_url=?,
        is_deleted=?,
        name=?,
        price=?,
        quantity=?,
        updated_at=? 
    where
        id=?
Hibernate: 
    update
        product_test 
    set
        category_id=?,
        created_at=?,
        description=?,
        discount=?,
        discount_price=?,
        image_url=?,
        is_deleted=?,
        name=?,
        price=?,
        quantity=?,
        updated_at=? 
    where
        id=?
2024-07-30T10:30:47.750+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:47.750+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:47.751+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:47.751+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:47.751+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:47.751+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:47.751+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:47.751+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:47.751+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:47.752+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:47.752+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:47.752+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:47.752+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:47.752+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-35 - Shutdown initiated...
2024-07-30T10:30:47.754+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-35 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2024-07-30T10:30:47.982+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Starting ProductControllerTest using Java 17.0.11 with PID 2876 (started by mameh1 in C:\Users\mameh1\Downloads\projects\spring-security\gatewayapp)
2024-07-30T10:30:47.982+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : The following 4 profiles are active: "db", "actuator", "google", "integration"
2024-07-30T10:30:48.661+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-30T10:30:48.754+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 93 ms. Found 12 JPA repository interfaces.
2024-07-30T10:30:48.802+04:00  INFO 2876 --- [    Test worker] o.s.cloud.context.scope.GenericScope     : BeanFactory id=fdf0a751-b714-323a-ae6a-061dba5ac89f
2024-07-30T10:30:48.832+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:48.834+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.835+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.837+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.838+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.838+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$1032/0x000002791c5e3010] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.840+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.843+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'spring.cloud.loadbalancer-org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.845+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.846+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.846+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientFactory' of type [org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.848+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'blockingLoadBalancerClient' of type [org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.851+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerServiceInstanceCookieTransformer' of type [org.springframework.cloud.loadbalancer.core.LoadBalancerServiceInstanceCookieTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.852+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'xForwarderHeadersTransformer' of type [org.springframework.cloud.loadbalancer.blocking.XForwardedHeadersTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.853+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.854+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerRequestFactory' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerRequestFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.854+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.856+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:48.857+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.858+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:48.920+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-07-30T10:30:48.921+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-07-30T10:30:48.921+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-07-30T10:30:48.995+04:00  INFO 2876 --- [    Test worker] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2024-07-30T10:30:48.995+04:00  INFO 2876 --- [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1011 ms
2024-07-30T10:30:49.139+04:00  INFO 2876 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-30T10:30:49.151+04:00  INFO 2876 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-07-30T10:30:49.167+04:00  INFO 2876 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-30T10:30:49.168+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-36 - Starting...
2024-07-30T10:30:49.169+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-36 - Added connection conn350: url=jdbc:h2:mem:demo user=POSTGRES
2024-07-30T10:30:49.170+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-36 - Start completed.
2024-07-30T10:30:49.170+04:00  WARN 2876 --- [    Test worker] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-07-30T10:30:49.317+04:00  INFO 2876 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-30T10:30:49.317+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:49.318+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:49.318+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:49.318+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:49.318+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:49.318+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:49.318+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:49.318+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:49.318+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:49.318+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:49.318+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:49.318+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:49.319+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
Hibernate: 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
2024-07-30T10:30:49.322+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
2024-07-30T10:30:49.324+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
Hibernate: 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
2024-07-30T10:30:49.326+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
2024-07-30T10:30:49.327+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
2024-07-30T10:30:49.328+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
Hibernate: 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
2024-07-30T10:30:49.328+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
Hibernate: 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
2024-07-30T10:30:49.329+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
Hibernate: 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
2024-07-30T10:30:49.330+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
Hibernate: 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
2024-07-30T10:30:49.331+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
Hibernate: 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
2024-07-30T10:30:49.331+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
Hibernate: 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
2024-07-30T10:30:49.332+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
Hibernate: 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
2024-07-30T10:30:49.332+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
Hibernate: 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
2024-07-30T10:30:49.333+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:49.334+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:49.335+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:49.337+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:49.338+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:49.338+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:49.339+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:49.339+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:49.340+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:49.340+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
Hibernate: 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
2024-07-30T10:30:49.340+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:49.341+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:49.341+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:49.341+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:49.342+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:49.350+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:49.825+04:00  WARN 2876 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-30T10:30:50.143+04:00  INFO 2876 --- [    Test worker] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-07-30T10:30:50.569+04:00  INFO 2876 --- [    Test worker] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 15 endpoint(s) beneath base path '/actuator'
2024-07-30T10:30:50.648+04:00  INFO 2876 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5fac2958, org.springframework.security.web.session.ForceEagerSessionCreationFilter@1ba5052b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c3d1633, org.springframework.security.web.context.SecurityContextHolderFilter@7968386c, org.springframework.security.web.header.HeaderWriterFilter@55534de7, org.springframework.web.filter.CorsFilter@1ae4b65, org.springframework.security.web.authentication.logout.LogoutFilter@177f47c7, com.example.springsecurity.security.JwtAuthenticationFilter@400e39a1, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2d1b70f4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7e84d78d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3932ac3e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3f7654e1, org.springframework.security.web.session.SessionManagementFilter@76bebc67, org.springframework.security.web.access.ExceptionTranslationFilter@4a6dffd9, org.springframework.security.web.access.intercept.AuthorizationFilter@18732c0d]
2024-07-30T10:30:51.178+04:00  WARN 2876 --- [    Test worker] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-07-30T10:30:51.232+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 55580 (http) with context path ''
2024-07-30T10:30:51.655+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Started ProductControllerTest in 3.896 seconds (process running for 145.477)
2024-07-30T10:30:51.675+04:00  INFO 2876 --- [-auto-36-exec-1] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-30T10:30:51.675+04:00  INFO 2876 --- [-auto-36-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-07-30T10:30:51.678+04:00  INFO 2876 --- [-auto-36-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2024-07-30T10:30:51.679+04:00  INFO 2876 --- [-auto-36-exec-1] c.e.s.security.JwtAuthenticationFilter   : Checking jwt token...
2024-07-30T10:30:51.685+04:00 DEBUG 2876 --- [-auto-36-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
2024-07-30T10:30:51.687+04:00 DEBUG 2876 --- [-auto-36-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
2024-07-30T10:30:51.688+04:00 DEBUG 2876 --- [-auto-36-exec-1] org.hibernate.SQL                        : 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
Hibernate: 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
2024-07-30T10:30:51.733+04:00 DEBUG 2876 --- [-auto-36-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.category_id,
        c1_0.description,
        c1_0.is_deleted,
        c1_0.name 
    from
        category_test c1_0 
    where
        c1_0.category_id=?
Hibernate: 
    select
        c1_0.category_id,
        c1_0.description,
        c1_0.is_deleted,
        c1_0.name 
    from
        category_test c1_0 
    where
        c1_0.category_id=?
2024-07-30T10:30:51.736+04:00 DEBUG 2876 --- [-auto-36-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.name=?
Hibernate: 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        p1_0.name=?
2024-07-30T10:30:51.745+04:00 DEBUG 2876 --- [-auto-36-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        product_test
        (category_id, created_at, description, discount, discount_price, image_url, is_deleted, name, price, quantity, updated_at, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        product_test
        (category_id, created_at, description, discount, discount_price, image_url, is_deleted, name, price, quantity, updated_at, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2024-07-30T10:30:51.747+04:00 DEBUG 2876 --- [-auto-36-exec-1] org.hibernate.SQL                        : 
    update
        product_test 
    set
        category_id=?,
        created_at=?,
        description=?,
        discount=?,
        discount_price=?,
        image_url=?,
        is_deleted=?,
        name=?,
        price=?,
        quantity=?,
        updated_at=? 
    where
        id=?
Hibernate: 
    update
        product_test 
    set
        category_id=?,
        created_at=?,
        description=?,
        discount=?,
        discount_price=?,
        image_url=?,
        is_deleted=?,
        name=?,
        price=?,
        quantity=?,
        updated_at=? 
    where
        id=?
2024-07-30T10:30:51.775+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:51.775+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:51.775+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:51.776+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:51.776+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:51.776+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:51.776+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:51.776+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:51.776+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:51.776+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:51.776+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:51.776+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:51.777+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:51.777+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-36 - Shutdown initiated...
2024-07-30T10:30:51.778+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-36 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2024-07-30T10:30:52.021+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Starting ProductControllerTest using Java 17.0.11 with PID 2876 (started by mameh1 in C:\Users\mameh1\Downloads\projects\spring-security\gatewayapp)
2024-07-30T10:30:52.021+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : The following 4 profiles are active: "db", "actuator", "google", "integration"
2024-07-30T10:30:52.757+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-30T10:30:52.843+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 84 ms. Found 12 JPA repository interfaces.
2024-07-30T10:30:52.902+04:00  INFO 2876 --- [    Test worker] o.s.cloud.context.scope.GenericScope     : BeanFactory id=fdf0a751-b714-323a-ae6a-061dba5ac89f
2024-07-30T10:30:52.937+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:52.939+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.941+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.943+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.945+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.945+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$1032/0x000002791c5e3010] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.947+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.950+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'spring.cloud.loadbalancer-org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.952+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.953+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.953+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientFactory' of type [org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.954+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'blockingLoadBalancerClient' of type [org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.957+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerServiceInstanceCookieTransformer' of type [org.springframework.cloud.loadbalancer.core.LoadBalancerServiceInstanceCookieTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.958+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'xForwarderHeadersTransformer' of type [org.springframework.cloud.loadbalancer.blocking.XForwardedHeadersTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.958+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.959+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerRequestFactory' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerRequestFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.960+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.961+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:52.962+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:52.962+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:53.024+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-07-30T10:30:53.025+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-07-30T10:30:53.025+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-07-30T10:30:53.080+04:00  INFO 2876 --- [    Test worker] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2024-07-30T10:30:53.080+04:00  INFO 2876 --- [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1057 ms
2024-07-30T10:30:53.223+04:00  INFO 2876 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-30T10:30:53.232+04:00  INFO 2876 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-07-30T10:30:53.247+04:00  INFO 2876 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-30T10:30:53.250+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-37 - Starting...
2024-07-30T10:30:53.251+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-37 - Added connection conn360: url=jdbc:h2:mem:demo user=POSTGRES
2024-07-30T10:30:53.251+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-37 - Start completed.
2024-07-30T10:30:53.251+04:00  WARN 2876 --- [    Test worker] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-07-30T10:30:53.413+04:00  INFO 2876 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-30T10:30:53.414+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:53.415+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:53.415+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:53.415+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:53.416+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:53.416+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:53.417+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:53.418+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:53.418+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:53.418+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:53.418+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:53.418+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:53.419+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
Hibernate: 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
2024-07-30T10:30:53.422+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
2024-07-30T10:30:53.423+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
Hibernate: 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
2024-07-30T10:30:53.424+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
2024-07-30T10:30:53.426+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
2024-07-30T10:30:53.427+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
Hibernate: 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
2024-07-30T10:30:53.427+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
Hibernate: 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
2024-07-30T10:30:53.429+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
Hibernate: 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
2024-07-30T10:30:53.429+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
Hibernate: 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
2024-07-30T10:30:53.430+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
Hibernate: 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
2024-07-30T10:30:53.430+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
Hibernate: 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
2024-07-30T10:30:53.431+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
Hibernate: 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
2024-07-30T10:30:53.431+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
Hibernate: 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
2024-07-30T10:30:53.432+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:53.433+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:53.433+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:53.433+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:53.434+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:53.434+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:53.434+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:53.435+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:53.435+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:53.435+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
Hibernate: 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
2024-07-30T10:30:53.436+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:53.436+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:53.436+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:53.436+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:53.437+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:53.439+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:54.045+04:00  WARN 2876 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-30T10:30:54.416+04:00  INFO 2876 --- [    Test worker] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-07-30T10:30:54.884+04:00  INFO 2876 --- [    Test worker] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 15 endpoint(s) beneath base path '/actuator'
2024-07-30T10:30:54.936+04:00  INFO 2876 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@69308293, org.springframework.security.web.session.ForceEagerSessionCreationFilter@4db11819, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@444c8701, org.springframework.security.web.context.SecurityContextHolderFilter@3dc71ad8, org.springframework.security.web.header.HeaderWriterFilter@4ff4c419, org.springframework.web.filter.CorsFilter@7fc2f9c8, org.springframework.security.web.authentication.logout.LogoutFilter@71659676, com.example.springsecurity.security.JwtAuthenticationFilter@226857d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2ab1c29e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@76250f9d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@66fe5e63, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@120bc8b9, org.springframework.security.web.session.SessionManagementFilter@a20d173, org.springframework.security.web.access.ExceptionTranslationFilter@3178f64c, org.springframework.security.web.access.intercept.AuthorizationFilter@7e09bd31]
2024-07-30T10:30:55.611+04:00  WARN 2876 --- [    Test worker] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-07-30T10:30:55.673+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 55583 (http) with context path ''
2024-07-30T10:30:56.265+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Started ProductControllerTest in 4.482 seconds (process running for 150.087)
2024-07-30T10:30:56.296+04:00  WARN 2876 --- [    Test worker] .c.j.MappingJackson2HttpMessageConverter : Failed to evaluate Jackson deserialization for type [[simple type, class com.example.springsecurity.controller.RestResponsePage<com.example.springsecurity.dto.ProductDto>]]: com.fasterxml.jackson.databind.JsonMappingException: Failed to narrow type [simple type, class com.example.springsecurity.controller.RestResponsePage<com.example.springsecurity.dto.ProductDto>] with annotation (value org.springframework.cloud.openfeign.support.PageJacksonModule$SimplePageImpl), from 'com.example.springsecurity.controller.RestResponsePage': Class `org.springframework.cloud.openfeign.support.PageJacksonModule$SimplePageImpl` not subtype of `com.example.springsecurity.controller.RestResponsePage<com.example.springsecurity.dto.ProductDto>`
2024-07-30T10:30:56.307+04:00  INFO 2876 --- [-auto-37-exec-1] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-30T10:30:56.307+04:00  INFO 2876 --- [-auto-37-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-07-30T10:30:56.309+04:00  INFO 2876 --- [-auto-37-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-07-30T10:30:56.310+04:00  INFO 2876 --- [-auto-37-exec-1] c.e.s.security.JwtAuthenticationFilter   : Checking jwt token...
2024-07-30T10:30:56.314+04:00 DEBUG 2876 --- [-auto-37-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    offset
        ? rows 
    fetch
        first ? rows only
Hibernate: 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    offset
        ? rows 
    fetch
        first ? rows only
2024-07-30T10:30:56.319+04:00 DEBUG 2876 --- [-auto-37-exec-1] org.hibernate.SQL                        : 
    select
        count(p1_0.id) 
    from
        product_test p1_0
Hibernate: 
    select
        count(p1_0.id) 
    from
        product_test p1_0
2024-07-30T10:30:56.321+04:00 DEBUG 2876 --- [-auto-37-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.category_id,
        c1_0.description,
        c1_0.is_deleted,
        c1_0.name 
    from
        category_test c1_0 
    where
        c1_0.category_id=?
Hibernate: 
    select
        c1_0.category_id,
        c1_0.description,
        c1_0.is_deleted,
        c1_0.name 
    from
        category_test c1_0 
    where
        c1_0.category_id=?
2024-07-30T10:30:56.336+04:00  WARN 2876 --- [    Test worker] .c.j.MappingJackson2HttpMessageConverter : Failed to evaluate Jackson deserialization for type [[simple type, class com.example.springsecurity.controller.RestResponsePage<com.example.springsecurity.dto.ProductDto>]]: com.fasterxml.jackson.databind.JsonMappingException: Failed to narrow type [simple type, class com.example.springsecurity.controller.RestResponsePage<com.example.springsecurity.dto.ProductDto>] with annotation (value org.springframework.cloud.openfeign.support.PageJacksonModule$SimplePageImpl), from 'com.example.springsecurity.controller.RestResponsePage': Class `org.springframework.cloud.openfeign.support.PageJacksonModule$SimplePageImpl` not subtype of `com.example.springsecurity.controller.RestResponsePage<com.example.springsecurity.dto.ProductDto>`
2024-07-30T10:30:56.374+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:56.375+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:56.375+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:56.375+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:56.375+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:56.375+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:56.376+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:56.376+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:56.376+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:56.376+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:56.376+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:56.376+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:56.376+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:56.377+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-37 - Shutdown initiated...
2024-07-30T10:30:56.379+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-37 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2024-07-30T10:30:56.682+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Starting ProductControllerTest using Java 17.0.11 with PID 2876 (started by mameh1 in C:\Users\mameh1\Downloads\projects\spring-security\gatewayapp)
2024-07-30T10:30:56.682+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : The following 4 profiles are active: "db", "actuator", "google", "integration"
2024-07-30T10:30:57.389+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-30T10:30:57.502+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 112 ms. Found 12 JPA repository interfaces.
2024-07-30T10:30:57.555+04:00  INFO 2876 --- [    Test worker] o.s.cloud.context.scope.GenericScope     : BeanFactory id=fdf0a751-b714-323a-ae6a-061dba5ac89f
2024-07-30T10:30:57.597+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:57.601+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.603+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.606+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.608+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.608+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$1032/0x000002791c5e3010] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.611+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.615+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'spring.cloud.loadbalancer-org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.619+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.620+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.621+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientFactory' of type [org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.623+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'blockingLoadBalancerClient' of type [org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.627+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerServiceInstanceCookieTransformer' of type [org.springframework.cloud.loadbalancer.core.LoadBalancerServiceInstanceCookieTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.629+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'xForwarderHeadersTransformer' of type [org.springframework.cloud.loadbalancer.blocking.XForwardedHeadersTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.631+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.632+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerRequestFactory' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerRequestFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.633+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.636+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:57.637+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.638+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:57.696+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-07-30T10:30:57.697+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-07-30T10:30:57.697+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-07-30T10:30:57.755+04:00  INFO 2876 --- [    Test worker] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2024-07-30T10:30:57.755+04:00  INFO 2876 --- [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1071 ms
2024-07-30T10:30:57.945+04:00  INFO 2876 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-30T10:30:57.957+04:00  INFO 2876 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-07-30T10:30:57.970+04:00  INFO 2876 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-30T10:30:57.973+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-38 - Starting...
2024-07-30T10:30:57.974+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-38 - Added connection conn370: url=jdbc:h2:mem:demo user=POSTGRES
2024-07-30T10:30:57.975+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-38 - Start completed.
2024-07-30T10:30:57.975+04:00  WARN 2876 --- [    Test worker] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-07-30T10:30:58.213+04:00  INFO 2876 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:58.215+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
Hibernate: 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
2024-07-30T10:30:58.217+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
2024-07-30T10:30:58.223+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
Hibernate: 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
2024-07-30T10:30:58.224+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
2024-07-30T10:30:58.224+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
2024-07-30T10:30:58.225+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
Hibernate: 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
2024-07-30T10:30:58.226+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
Hibernate: 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
2024-07-30T10:30:58.226+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
Hibernate: 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
2024-07-30T10:30:58.227+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
Hibernate: 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
2024-07-30T10:30:58.235+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
Hibernate: 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
2024-07-30T10:30:58.236+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
Hibernate: 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
2024-07-30T10:30:58.236+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
Hibernate: 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
2024-07-30T10:30:58.237+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
Hibernate: 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
2024-07-30T10:30:58.237+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:58.238+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:58.238+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:58.253+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:58.255+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:58.257+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:58.257+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:58.258+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:58.262+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:58.267+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
Hibernate: 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
2024-07-30T10:30:58.275+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:58.277+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:58.315+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:58.317+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:58.318+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:58.320+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:58.911+04:00  WARN 2876 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-30T10:30:59.269+04:00  INFO 2876 --- [    Test worker] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-07-30T10:30:59.773+04:00  INFO 2876 --- [    Test worker] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 15 endpoint(s) beneath base path '/actuator'
2024-07-30T10:30:59.831+04:00  INFO 2876 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1560f8cc, org.springframework.security.web.session.ForceEagerSessionCreationFilter@4f6ea037, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7edf2ddc, org.springframework.security.web.context.SecurityContextHolderFilter@539fc3b7, org.springframework.security.web.header.HeaderWriterFilter@4d725178, org.springframework.web.filter.CorsFilter@7b5020b2, org.springframework.security.web.authentication.logout.LogoutFilter@46a7396b, com.example.springsecurity.security.JwtAuthenticationFilter@7ee13c02, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@48e246d9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423ed457, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@41c10ff3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@69e4018c, org.springframework.security.web.session.SessionManagementFilter@1abe54c9, org.springframework.security.web.access.ExceptionTranslationFilter@413d93ae, org.springframework.security.web.access.intercept.AuthorizationFilter@2a5afcb3]
2024-07-30T10:31:00.689+04:00  WARN 2876 --- [    Test worker] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-07-30T10:31:00.743+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 55603 (http) with context path ''
2024-07-30T10:31:01.255+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.ProductControllerTest   : Started ProductControllerTest in 4.87 seconds (process running for 155.076)
2024-07-30T10:31:01.277+04:00  INFO 2876 --- [-auto-38-exec-1] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-30T10:31:01.277+04:00  INFO 2876 --- [-auto-38-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-07-30T10:31:01.279+04:00  INFO 2876 --- [-auto-38-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-07-30T10:31:01.281+04:00  INFO 2876 --- [-auto-38-exec-1] c.e.s.security.JwtAuthenticationFilter   : Checking jwt token...
2024-07-30T10:31:01.296+04:00 DEBUG 2876 --- [-auto-38-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        lower(p1_0.name) like lower(('%'||?||'%')) escape ''
Hibernate: 
    select
        p1_0.id,
        p1_0.category_id,
        p1_0.created_at,
        p1_0.description,
        p1_0.discount,
        p1_0.discount_price,
        p1_0.image_url,
        p1_0.is_deleted,
        p1_0.name,
        p1_0.price,
        p1_0.quantity,
        p1_0.updated_at 
    from
        product_test p1_0 
    where
        lower(p1_0.name) like lower(('%'||?||'%')) escape ''
2024-07-30T10:31:01.300+04:00 DEBUG 2876 --- [-auto-38-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.category_id,
        c1_0.description,
        c1_0.is_deleted,
        c1_0.name 
    from
        category_test c1_0 
    where
        c1_0.category_id=?
Hibernate: 
    select
        c1_0.category_id,
        c1_0.description,
        c1_0.is_deleted,
        c1_0.name 
    from
        category_test c1_0 
    where
        c1_0.category_id=?
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
