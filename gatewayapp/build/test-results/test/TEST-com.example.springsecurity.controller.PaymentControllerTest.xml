<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="com.example.springsecurity.controller.PaymentControllerTest" tests="2" skipped="0" failures="0" errors="0" timestamp="2024-07-30T06:30:15" hostname="E-AA-2Y5HDK3-L" time="7.871">
  <properties/>
  <testcase name="processPayment_ValidRequest_ReturnsCreated()" classname="com.example.springsecurity.controller.PaymentControllerTest" time="4.069"/>
  <testcase name="processPaymentWithPayPal_ValidRequest_ReturnsOk()" classname="com.example.springsecurity.controller.PaymentControllerTest" time="3.802"/>
  <system-out><![CDATA[2024-07-30T10:30:15.321+04:00  INFO 2876 --- [    Test worker] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.springsecurity.controller.PaymentControllerTest]: PaymentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-07-30T10:30:15.323+04:00  INFO 2876 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.springsecurity.GatewayappApplication for test class com.example.springsecurity.controller.PaymentControllerTest
2024-07-30T10:30:15.344+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:15.344+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:15.344+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:15.345+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:15.345+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:15.345+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:15.347+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:15.347+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:15.347+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:15.347+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:15.347+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:15.347+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:15.348+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:15.348+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-27 - Shutdown initiated...
2024-07-30T10:30:15.349+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-27 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2024-07-30T10:30:15.539+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.PaymentControllerTest   : Starting PaymentControllerTest using Java 17.0.11 with PID 2876 (started by mameh1 in C:\Users\mameh1\Downloads\projects\spring-security\gatewayapp)
2024-07-30T10:30:15.539+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.PaymentControllerTest   : The following 4 profiles are active: "db", "actuator", "google", "integration"
2024-07-30T10:30:16.162+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-30T10:30:16.268+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 105 ms. Found 12 JPA repository interfaces.
2024-07-30T10:30:16.316+04:00  INFO 2876 --- [    Test worker] o.s.cloud.context.scope.GenericScope     : BeanFactory id=fdf0a751-b714-323a-ae6a-061dba5ac89f
2024-07-30T10:30:16.346+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:16.347+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.348+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.350+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.351+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.352+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$1032/0x000002791c5e3010] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.354+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.356+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'spring.cloud.loadbalancer-org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.358+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.359+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.359+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientFactory' of type [org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.360+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'blockingLoadBalancerClient' of type [org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.365+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerServiceInstanceCookieTransformer' of type [org.springframework.cloud.loadbalancer.core.LoadBalancerServiceInstanceCookieTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.367+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'xForwarderHeadersTransformer' of type [org.springframework.cloud.loadbalancer.blocking.XForwardedHeadersTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.368+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.369+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerRequestFactory' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerRequestFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.370+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.373+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:16.374+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.375+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:16.432+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-07-30T10:30:16.433+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-07-30T10:30:16.433+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-07-30T10:30:16.496+04:00  INFO 2876 --- [    Test worker] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2024-07-30T10:30:16.496+04:00  INFO 2876 --- [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 956 ms
2024-07-30T10:30:16.647+04:00  INFO 2876 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-30T10:30:16.657+04:00  INFO 2876 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-07-30T10:30:16.672+04:00  INFO 2876 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-30T10:30:16.675+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-28 - Starting...
2024-07-30T10:30:16.677+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-28 - Added connection conn270: url=jdbc:h2:mem:demo user=POSTGRES
2024-07-30T10:30:16.677+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-28 - Start completed.
2024-07-30T10:30:16.678+04:00  WARN 2876 --- [    Test worker] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-07-30T10:30:16.918+04:00  INFO 2876 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-30T10:30:16.918+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:16.919+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:16.919+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:16.919+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:16.919+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:16.919+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:16.919+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:16.920+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:16.920+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:16.920+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:16.920+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:16.920+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:16.921+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
Hibernate: 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
2024-07-30T10:30:16.923+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
2024-07-30T10:30:16.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
Hibernate: 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
2024-07-30T10:30:16.927+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
2024-07-30T10:30:16.927+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
2024-07-30T10:30:16.928+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
Hibernate: 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
2024-07-30T10:30:16.928+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
Hibernate: 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
2024-07-30T10:30:16.929+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
Hibernate: 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
2024-07-30T10:30:16.930+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
Hibernate: 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
2024-07-30T10:30:16.930+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
Hibernate: 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
2024-07-30T10:30:16.932+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
Hibernate: 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
2024-07-30T10:30:16.933+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
Hibernate: 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
2024-07-30T10:30:16.933+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
Hibernate: 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
2024-07-30T10:30:16.938+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:16.940+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:16.942+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:16.944+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:16.944+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:16.945+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:16.945+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:16.945+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:16.946+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:16.948+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
Hibernate: 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
2024-07-30T10:30:16.948+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:16.949+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:16.949+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:16.949+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:16.950+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:16.980+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:17.516+04:00  WARN 2876 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-30T10:30:17.829+04:00  INFO 2876 --- [    Test worker] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-07-30T10:30:18.201+04:00  INFO 2876 --- [    Test worker] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 15 endpoint(s) beneath base path '/actuator'
2024-07-30T10:30:18.245+04:00  INFO 2876 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@313d92f3, org.springframework.security.web.session.ForceEagerSessionCreationFilter@170aed0c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1a22e153, org.springframework.security.web.context.SecurityContextHolderFilter@4ced09a2, org.springframework.security.web.header.HeaderWriterFilter@42484f1f, org.springframework.web.filter.CorsFilter@5352b71b, org.springframework.security.web.authentication.logout.LogoutFilter@3059b8b2, com.example.springsecurity.security.JwtAuthenticationFilter@3f98ac7f, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5d478a0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6b8ba481, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2e551919, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@ea50d88, org.springframework.security.web.session.SessionManagementFilter@4b0f1deb, org.springframework.security.web.access.ExceptionTranslationFilter@712441e2, org.springframework.security.web.access.intercept.AuthorizationFilter@18db1ec9]
2024-07-30T10:30:18.778+04:00  WARN 2876 --- [    Test worker] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-07-30T10:30:18.843+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 55522 (http) with context path ''
2024-07-30T10:30:19.312+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.PaymentControllerTest   : Started PaymentControllerTest in 3.959 seconds (process running for 113.132)
2024-07-30T10:30:19.340+04:00  INFO 2876 --- [-auto-28-exec-1] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-30T10:30:19.340+04:00  INFO 2876 --- [-auto-28-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-07-30T10:30:19.344+04:00  INFO 2876 --- [-auto-28-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2024-07-30T10:30:19.346+04:00  INFO 2876 --- [-auto-28-exec-1] c.e.s.security.JwtAuthenticationFilter   : Checking jwt token...
2024-07-30T10:30:19.354+04:00 DEBUG 2876 --- [-auto-28-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
2024-07-30T10:30:19.358+04:00 DEBUG 2876 --- [-auto-28-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
2024-07-30T10:30:19.361+04:00 DEBUG 2876 --- [-auto-28-exec-1] org.hibernate.SQL                        : 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
Hibernate: 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
2024-07-30T10:30:19.370+04:00 DEBUG 2876 --- [-auto-28-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.id=?
2024-07-30T10:30:19.372+04:00 DEBUG 2876 --- [-auto-28-exec-1] org.hibernate.SQL                        : 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
Hibernate: 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
2024-07-30T10:30:19.373+04:00 DEBUG 2876 --- [-auto-28-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.customer_id,
        c1_0.id,
        c1_0.card_balance,
        c1_0.card_number,
        c1_0.cvv,
        c1_0.expiration_date 
    from
        customer_card_details c1_0 
    where
        c1_0.customer_id=?
Hibernate: 
    select
        c1_0.customer_id,
        c1_0.id,
        c1_0.card_balance,
        c1_0.card_number,
        c1_0.cvv,
        c1_0.expiration_date 
    from
        customer_card_details c1_0 
    where
        c1_0.customer_id=?
2024-07-30T10:30:19.376+04:00 DEBUG 2876 --- [-auto-28-exec-1] o.h.sql.results.internal.ResultsHelper   : Collection fully initialized: [com.example.springsecurity.entity.Customer.cards#2]
2024-07-30T10:30:19.378+04:00 DEBUG 2876 --- [-auto-28-exec-1] org.hibernate.SQL                        : 
    select
        o1_0.id,
        o1_0.created_at,
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id,
        o1_0.is_paid,
        o1_0.status,
        o1_0.total_amount,
        o1_0.updated_at 
    from
        order_test o1_0 
    left join
        customer c1_0 
            on c1_0.id=o1_0.customer_id 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        o1_0.id=?
Hibernate: 
    select
        o1_0.id,
        o1_0.created_at,
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id,
        o1_0.is_paid,
        o1_0.status,
        o1_0.total_amount,
        o1_0.updated_at 
    from
        order_test o1_0 
    left join
        customer c1_0 
            on c1_0.id=o1_0.customer_id 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        o1_0.id=?
2024-07-30T10:30:19.382+04:00 DEBUG 2876 --- [-auto-28-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        payment
        (amount, customer_id, order_id, payment_date, payment_status, id) 
    values
        (?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        payment
        (amount, customer_id, order_id, payment_date, payment_status, id) 
    values
        (?, ?, ?, ?, ?, default)
2024-07-30T10:30:19.386+04:00 DEBUG 2876 --- [-auto-28-exec-1] org.hibernate.SQL                        : 
    update
        customer_card_details 
    set
        card_balance=?,
        card_number=?,
        customer_id=?,
        cvv=?,
        expiration_date=? 
    where
        id=?
Hibernate: 
    update
        customer_card_details 
    set
        card_balance=?,
        card_number=?,
        customer_id=?,
        cvv=?,
        expiration_date=? 
    where
        id=?
2024-07-30T10:30:19.386+04:00 DEBUG 2876 --- [-auto-28-exec-1] org.hibernate.SQL                        : 
    update
        order_test 
    set
        created_at=?,
        customer_id=?,
        is_paid=?,
        status=?,
        total_amount=?,
        updated_at=? 
    where
        id=?
Hibernate: 
    update
        order_test 
    set
        created_at=?,
        customer_id=?,
        is_paid=?,
        status=?,
        total_amount=?,
        updated_at=? 
    where
        id=?
2024-07-30T10:30:19.412+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:19.412+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:19.413+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:19.413+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:19.413+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:19.413+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:19.413+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:19.413+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:19.414+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:19.414+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:19.414+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:19.414+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:19.414+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:19.414+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-28 - Shutdown initiated...
2024-07-30T10:30:19.417+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-28 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2024-07-30T10:30:19.602+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.PaymentControllerTest   : Starting PaymentControllerTest using Java 17.0.11 with PID 2876 (started by mameh1 in C:\Users\mameh1\Downloads\projects\spring-security\gatewayapp)
2024-07-30T10:30:19.602+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.PaymentControllerTest   : The following 4 profiles are active: "db", "actuator", "google", "integration"
2024-07-30T10:30:20.181+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-30T10:30:20.288+04:00  INFO 2876 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 107 ms. Found 12 JPA repository interfaces.
2024-07-30T10:30:20.357+04:00  INFO 2876 --- [    Test worker] o.s.cloud.context.scope.GenericScope     : BeanFactory id=fdf0a751-b714-323a-ae6a-061dba5ac89f
2024-07-30T10:30:20.394+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration$LoadBalancerInterceptorConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lbRestClientPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:20.397+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.398+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.401+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.402+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.402+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$1032/0x000002791c5e3010] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.404+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.408+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'spring.cloud.loadbalancer-org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerClientsProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.409+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.LoadBalancerAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.410+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'default.org.springframework.cloud.loadbalancer.config.BlockingLoadBalancerClientAutoConfiguration.LoadBalancerClientSpecification' of type [org.springframework.cloud.loadbalancer.annotation.LoadBalancerClientSpecification] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.411+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientFactory' of type [org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.413+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'blockingLoadBalancerClient' of type [org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.417+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerServiceInstanceCookieTransformer' of type [org.springframework.cloud.loadbalancer.core.LoadBalancerServiceInstanceCookieTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.418+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'xForwarderHeadersTransformer' of type [org.springframework.cloud.loadbalancer.blocking.XForwardedHeadersTransformer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.419+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.420+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerRequestFactory' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerRequestFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.421+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerInterceptor' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [lbRestClientPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.423+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-07-30T10:30:20.424+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.425+04:00  WARN 2876 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [loadBalancerWebClientBuilderBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2024-07-30T10:30:20.484+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2024-07-30T10:30:20.485+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-07-30T10:30:20.485+04:00  INFO 2876 --- [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2024-07-30T10:30:20.536+04:00  INFO 2876 --- [    Test worker] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2024-07-30T10:30:20.536+04:00  INFO 2876 --- [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 932 ms
2024-07-30T10:30:20.697+04:00  INFO 2876 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-07-30T10:30:20.705+04:00  INFO 2876 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-07-30T10:30:20.717+04:00  INFO 2876 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-07-30T10:30:20.721+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-29 - Starting...
2024-07-30T10:30:20.722+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-29 - Added connection conn280: url=jdbc:h2:mem:demo user=POSTGRES
2024-07-30T10:30:20.722+04:00  INFO 2876 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-29 - Start completed.
2024-07-30T10:30:20.723+04:00  WARN 2876 --- [    Test worker] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-07-30T10:30:20.924+04:00  INFO 2876 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-07-30T10:30:20.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists category_test cascade 
Hibernate: 
    drop table if exists category_test cascade 
2024-07-30T10:30:20.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer cascade 
Hibernate: 
    drop table if exists customer cascade 
2024-07-30T10:30:20.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_discount cascade 
Hibernate: 
    drop table if exists customer_discount cascade 
2024-07-30T10:30:20.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists customer_card_details cascade 
Hibernate: 
    drop table if exists customer_card_details cascade 
2024-07-30T10:30:20.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_product cascade 
Hibernate: 
    drop table if exists order_product cascade 
2024-07-30T10:30:20.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists order_test cascade 
Hibernate: 
    drop table if exists order_test cascade 
2024-07-30T10:30:20.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists payment cascade 
Hibernate: 
    drop table if exists payment cascade 
2024-07-30T10:30:20.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists product_test cascade 
Hibernate: 
    drop table if exists product_test cascade 
2024-07-30T10:30:20.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists rating cascade 
Hibernate: 
    drop table if exists rating cascade 
2024-07-30T10:30:20.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists users_test cascade 
Hibernate: 
    drop table if exists users_test cascade 
2024-07-30T10:30:20.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist cascade 
Hibernate: 
    drop table if exists wishlist cascade 
2024-07-30T10:30:20.925+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    drop table if exists wishlist_item cascade 
Hibernate: 
    drop table if exists wishlist_item cascade 
2024-07-30T10:30:20.926+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
Hibernate: 
    create table category_test (
        is_deleted boolean not null,
        category_id bigint generated by default as identity,
        description varchar(255),
        name varchar(255),
        primary key (category_id)
    )
2024-07-30T10:30:20.927+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer (
        balance numeric(38,2),
        id bigint generated by default as identity,
        registered_at timestamp(6),
        user_id bigint unique,
        wishlist_id bigint unique,
        address varchar(255),
        name varchar(255),
        surname varchar(255),
        primary key (id)
    )
2024-07-30T10:30:20.928+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
Hibernate: 
    create table customer_discount (
        dice_rolled boolean not null,
        die1 integer not null,
        die2 integer not null,
        discount numeric(38,2),
        discount_price numeric(38,2),
        customer_id bigint unique,
        expires_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id),
        unique (customer_id, product_id)
    )
2024-07-30T10:30:20.929+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
Hibernate: 
    create table customer_card_details (
        card_balance numeric(38,2),
        expiration_date date,
        customer_id bigint,
        id bigint generated by default as identity,
        card_number varchar(255) unique,
        cvv varchar(255),
        primary key (id)
    )
2024-07-30T10:30:20.929+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
Hibernate: 
    create table order_product (
        quantity integer not null,
        id bigint generated by default as identity,
        order_id bigint,
        product_id bigint,
        product_name varchar(255),
        primary key (id)
    )
2024-07-30T10:30:20.929+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
Hibernate: 
    create table order_test (
        is_paid boolean not null,
        total_amount numeric(38,2),
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        status varchar(255) check (status in ('DELIVERED','PENDING','CANCEL','PAID','AWAITING')),
        primary key (id)
    )
2024-07-30T10:30:20.930+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
Hibernate: 
    create table payment (
        amount numeric(38,2),
        customer_id bigint,
        id bigint generated by default as identity,
        order_id bigint,
        payment_date timestamp(6),
        payment_status varchar(255) check (payment_status in ('CREDIT_CARD','DEBIT_CARD','PAYPAL','APPLE_PAY','GOOGLE_PAY')),
        primary key (id)
    )
2024-07-30T10:30:20.931+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
Hibernate: 
    create table product_test (
        discount numeric(38,2),
        discount_price numeric(38,2),
        is_deleted boolean not null,
        price numeric(38,2),
        quantity integer not null,
        category_id bigint,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        description varchar(255),
        image_url varchar(255),
        name varchar(255) unique,
        primary key (id)
    )
2024-07-30T10:30:20.932+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
Hibernate: 
    create table rating (
        rating integer,
        created_at timestamp(6),
        customer_id bigint,
        id bigint generated by default as identity,
        product_id bigint,
        primary key (id)
    )
2024-07-30T10:30:20.932+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
Hibernate: 
    create table users_test (
        locked boolean not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        password varchar(255) unique,
        role varchar(255) check (role in ('USER','ADMIN')),
        username varchar(255),
        primary key (id)
    )
2024-07-30T10:30:20.934+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
Hibernate: 
    create table wishlist (
        created_at timestamp(6),
        customer_id bigint unique,
        id bigint generated by default as identity,
        primary key (id)
    )
2024-07-30T10:30:20.934+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
Hibernate: 
    create table wishlist_item (
        created_at timestamp(6),
        id bigint generated by default as identity,
        product_id bigint,
        wishlist_id bigint,
        primary key (id)
    )
2024-07-30T10:30:20.935+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
Hibernate: 
    alter table if exists customer 
       add constraint FKark4ctv4ntkwoy4noakb0d8ml 
       foreign key (user_id) 
       references users_test
2024-07-30T10:30:20.935+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists customer 
       add constraint FKpkpd7h3y46hd6mdeg7wqvpr5c 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:20.936+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_discount 
       add constraint FK7dkdkmoy90h1bujr1rmanu0lv 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:20.936+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists customer_discount 
       add constraint FKtrcs0xnvyl8qc2df5y7ylkjx4 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:20.938+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists customer_card_details 
       add constraint FKmhdwuj27irdm4944qjnk0w85n 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:20.938+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKayh03vge4huu6s586xbfsykn9 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:20.939+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists order_product 
       add constraint FKo602fm657h9jspk41f4gnmx22 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:20.939+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists order_test 
       add constraint FK5sdaieho0j5cyeurhq25i4cec 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:20.939+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists payment 
       add constraint FKby2skjf3ov608yb6nm16b49lg 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:20.941+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
Hibernate: 
    alter table if exists payment 
       add constraint FKhljpso7llgtyfun73rsnkkcqp 
       foreign key (order_id) 
       references order_test
2024-07-30T10:30:20.942+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
Hibernate: 
    alter table if exists product_test 
       add constraint FK2hq85enq18gwx62b83r7bmaj8 
       foreign key (category_id) 
       references category_test
2024-07-30T10:30:20.942+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists rating 
       add constraint FK92d54lg7br8t0wb68h23u4jkn 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:20.942+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists rating 
       add constraint FKkthk5w06fdouceg1vx51u26fh 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:20.943+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
Hibernate: 
    alter table if exists wishlist 
       add constraint FKb6xak0rjui1rsok8ll7ln59cs 
       foreign key (customer_id) 
       references customer
2024-07-30T10:30:20.943+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5y7uu8ej8bpj54xbke3ak4x6 
       foreign key (product_id) 
       references product_test
2024-07-30T10:30:20.944+04:00 DEBUG 2876 --- [    Test worker] org.hibernate.SQL                        : 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
Hibernate: 
    alter table if exists wishlist_item 
       add constraint FK5iw5sajivrxnt4qjxqlgo8yb1 
       foreign key (wishlist_id) 
       references wishlist
2024-07-30T10:30:20.948+04:00  INFO 2876 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-30T10:30:21.314+04:00  WARN 2876 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-07-30T10:30:21.624+04:00  INFO 2876 --- [    Test worker] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-07-30T10:30:22.114+04:00  INFO 2876 --- [    Test worker] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 15 endpoint(s) beneath base path '/actuator'
2024-07-30T10:30:22.164+04:00  INFO 2876 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5c638d45, org.springframework.security.web.session.ForceEagerSessionCreationFilter@33e30406, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@a9b88f5, org.springframework.security.web.context.SecurityContextHolderFilter@72fac8d5, org.springframework.security.web.header.HeaderWriterFilter@29ba650e, org.springframework.web.filter.CorsFilter@5a5d0bbf, org.springframework.security.web.authentication.logout.LogoutFilter@793994d5, com.example.springsecurity.security.JwtAuthenticationFilter@5b6b9c41, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7c027da2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@22e6b863, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5f23ff7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1a14ac14, org.springframework.security.web.session.SessionManagementFilter@4b3c0c80, org.springframework.security.web.access.ExceptionTranslationFilter@58c1ff48, org.springframework.security.web.access.intercept.AuthorizationFilter@1d50fa7c]
2024-07-30T10:30:22.753+04:00  WARN 2876 --- [    Test worker] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-07-30T10:30:22.787+04:00  INFO 2876 --- [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 55525 (http) with context path ''
2024-07-30T10:30:23.138+04:00  INFO 2876 --- [    Test worker] c.e.s.controller.PaymentControllerTest   : Started PaymentControllerTest in 3.717 seconds (process running for 116.959)
2024-07-30T10:30:23.158+04:00  INFO 2876 --- [-auto-29-exec-1] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-07-30T10:30:23.158+04:00  INFO 2876 --- [-auto-29-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-07-30T10:30:23.160+04:00  INFO 2876 --- [-auto-29-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-07-30T10:30:23.161+04:00  INFO 2876 --- [-auto-29-exec-1] c.e.s.security.JwtAuthenticationFilter   : Checking jwt token...
2024-07-30T10:30:23.167+04:00 DEBUG 2876 --- [-auto-29-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.locked,
        u1_0.password,
        u1_0.role,
        u1_0.username 
    from
        users_test u1_0 
    where
        u1_0.id=?
2024-07-30T10:30:23.169+04:00 DEBUG 2876 --- [-auto-29-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id 
    from
        customer c1_0 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        c1_0.user_id=?
2024-07-30T10:30:23.171+04:00 DEBUG 2876 --- [-auto-29-exec-1] org.hibernate.SQL                        : 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
Hibernate: 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
2024-07-30T10:30:23.177+04:00 DEBUG 2876 --- [-auto-29-exec-1] org.hibernate.SQL                        : 
    select
        o1_0.id,
        o1_0.created_at,
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id,
        o1_0.is_paid,
        o1_0.status,
        o1_0.total_amount,
        o1_0.updated_at 
    from
        order_test o1_0 
    left join
        customer c1_0 
            on c1_0.id=o1_0.customer_id 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        o1_0.id=?
Hibernate: 
    select
        o1_0.id,
        o1_0.created_at,
        c1_0.id,
        c1_0.address,
        c1_0.balance,
        c1_0.name,
        c1_0.registered_at,
        c1_0.surname,
        c1_0.user_id,
        w1_0.id,
        w1_0.created_at,
        c2_0.id,
        c2_0.address,
        c2_0.balance,
        c2_0.name,
        c2_0.registered_at,
        c2_0.surname,
        c2_0.user_id,
        c2_0.wishlist_id,
        o1_0.is_paid,
        o1_0.status,
        o1_0.total_amount,
        o1_0.updated_at 
    from
        order_test o1_0 
    left join
        customer c1_0 
            on c1_0.id=o1_0.customer_id 
    left join
        wishlist w1_0 
            on w1_0.id=c1_0.wishlist_id 
    left join
        customer c2_0 
            on c2_0.id=w1_0.customer_id 
    where
        o1_0.id=?
2024-07-30T10:30:23.179+04:00 DEBUG 2876 --- [-auto-29-exec-1] org.hibernate.SQL                        : 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
Hibernate: 
    select
        cd1_0.id,
        cd1_0.customer_id,
        cd1_0.dice_rolled,
        cd1_0.die1,
        cd1_0.die2,
        cd1_0.discount,
        cd1_0.discount_price,
        cd1_0.expires_at,
        cd1_0.product_id 
    from
        customer_discount cd1_0 
    where
        cd1_0.customer_id=?
2024-07-30T10:30:23.185+04:00 DEBUG 2876 --- [-auto-29-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        payment
        (amount, customer_id, order_id, payment_date, payment_status, id) 
    values
        (?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        payment
        (amount, customer_id, order_id, payment_date, payment_status, id) 
    values
        (?, ?, ?, ?, ?, default)
2024-07-30T10:30:23.187+04:00 DEBUG 2876 --- [-auto-29-exec-1] org.hibernate.SQL                        : 
    update
        customer 
    set
        address=?,
        balance=?,
        name=?,
        registered_at=?,
        surname=?,
        user_id=?,
        wishlist_id=? 
    where
        id=?
Hibernate: 
    update
        customer 
    set
        address=?,
        balance=?,
        name=?,
        registered_at=?,
        surname=?,
        user_id=?,
        wishlist_id=? 
    where
        id=?
2024-07-30T10:30:23.190+04:00 DEBUG 2876 --- [-auto-29-exec-1] org.hibernate.SQL                        : 
    update
        order_test 
    set
        created_at=?,
        customer_id=?,
        is_paid=?,
        status=?,
        total_amount=?,
        updated_at=? 
    where
        id=?
Hibernate: 
    update
        order_test 
    set
        created_at=?,
        customer_id=?,
        is_paid=?,
        status=?,
        total_amount=?,
        updated_at=? 
    where
        id=?
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
